section .text
  global _start

util: ;;this function just adds up all the arguments
  push rbp
  mov rbp, rsp
  add rax, rdi ;;1
  add rax, rsi ;;2
  add rax, rdx ;;3
  add rax, rcx ;;4
  add rax, r8 ;;5
  add rax, r9 ;;6
  add rax, qword [rsp + 16] ;;7
  leave ;;rax now holds 0x1c, or 28
  ret

_start:
  push rbp
  mov rbp, rsp
  mov rdi, 1
  mov rsi, 2
  mov rdx, 3
  mov rcx, 4
  mov r8, 5
  mov r9, 6
  push 7
  call util ;;rax should now hold 0x1c (28)
  xor rdi,rdi
  mov rax, 0x3c
  syscall
